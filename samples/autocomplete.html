<!DOCTYPE html>
<!--
	Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.
	For licensing, see license.html or https://sdk.ckeditor.com/license.html.
-->
<html>
	<head>
		<meta charset="utf-8">
		<meta name="description" content="Autocomplete plugin">
		<meta name="keywords" content="ckeditor, editor, wysiwyg, autocomplete, complete, default, configure, configuration, setup, settings, options, customization, customize, customise, customisation, config, modification, modify, change">
		<meta name="sdk-samples" content="Autocomplete">
		<title>Autocomplete</title>
		<link href="https://fonts.googleapis.com/css?family=Maven+Pro:700,500,400" rel="stylesheet">
		<link href="../template/theme/css/sdk.css" rel="stylesheet">
		<script src="../../ckeditor-dev/ckeditor.js"></script>
		<script src="assets/picoModal-2.0.1.min.js"></script>
		<script src="assets/contentloaded.js"></script>
		<script src="assets/simplesample.js"></script>
		<script src="assets/beautify-html.js"></script>
		<script src="assets/sample.js"></script>
		<!--[if lt IE 9]>
			<script src="assets/html5shiv.min.js"></script>
		<![endif]-->
		<link rel="icon" href="../template/theme/img/favicon.ico">
		<style>
			ul.cke_autocomplete_panel {
				width: 300px;
			}
			ul.cke_autocomplete_panel li {
				padding: 5px;
			}
			ul.cke_autocomplete_panel .content {
				white-space: nowrap;
				overflow: hidden;
				text-overflow:ellipsis;
				color: #676767;
				padding-top: 5px;
			}
			.columns {
				overflow: hidden;
			}
			.columns > .editor {
				float: left;
				width: 65%;
				position: relative;
			}
			.columns > .templates {
				float: right;
				width: 35%;
			}
			.columns > .templates > ul {
				margin: 15px 0 0 10px;
			}
		</style>
	</head>
	<body>
		<header class="sdk-header">
		</header>
		<section class="sdk-container">
			<nav class="sdk-sidebar">
			</nav>
			<section class="sdk-contents">
				<h1>Autocomplete <a class="documentation" href="https://docs.ckeditor.com/ckeditor4/docs/#!/guide/dev_autocomplete.html">Documentation</a></h1>

				<p>
					The optional <a href="https://ckeditor.com/cke4/addon/autocomplete">Autocomplete</a> plugin, introduced in CKEditor 4.10, provides contextual completion functionality for custom text matches based on user input. Every time the user types a pre-configured special character, such as <code>@</code> or <code>#</code>, they get information about available autocomplete suggestions displayed in a dedicated dropdown.
				</p>

				<p>
					This feature is a base for implementing specialized autocomplete features, such as <a href="./mentions.html">mentions, tags, emoji</a> or custom implementations.
				</p>

				<p>
					The following sample implements a few smart templates for a bug tracker. Start typing the name of one the templates visible on the right side of the editor. Type at least 3 characters and accept the selected option from the dropdown using the <kbd>Enter</kbd> or <kbd>Tab</kbd> key.
				</p>

				<div class="columns">
					<div class="templates">
						<ul>
							<li><code>missingtests</code></li>
							<li><code>noresponse</code></li>
							<li><code>securityissue</code></li>
							<li><code>supportquestion</code></li>
							<li><code>thirdparty</code></li>
							<li><code>unsupportedbrowser</code></li>
							<li><code>translation</code></li>
							<li><code>englishonly</code></li>
							<li><code>upstream</code></li>
							<li><code>missingdetails</code></li>
						</ul>
					</div>

					<div class="editor">
						<textarea cols="80" id="editor1" name="editor1" rows="10" data-sample="1" data-sample-short></textarea>
					</div>
				</div>

				<h2>Related Features</h2>
				<ul>
					<li><a href="./mentions.html">Working with Document &ndash; Mentions, Tags and Emoji</a></li>
				</ul>

			</section>
		</section>

		<footer class="sdk-footer">
		</footer>

		<script data-sample="1" >
			var TEMPLATES = [
				{
					id: 1,
					name: 'missingtests',
					title: 'Missing tests',
					content: 'This pull request is missing tests, see our <a href="http://docs.ckeditor.com/#!/guide/dev_contributing_code">Contributing Code</a> guide for more details.'
				},
				{
					id: 2,
					name: 'noresponse',
					title: 'No response',
					content: "It has been a while since we last heard from you. We are closing this issue for now. Still, we will be happy to reopen this issue should you provide us with the requested feedback."
				},
				{
					id: 3,
					name: 'securityissue',
					title: 'Security issue',
					content: 'Thank you for your report. We will investigate it thoroughly. Meanwhile I will close this issue as we normally ask for sending security reports through <a href="https://ckeditor.com/contact/" >our contact form</a>. For security reasons I removed the original description, but the issue you submitted is being handled in our security tracker.'
				},
				{
					id: 4,
					name: 'supportquestion',
					title: 'Support question',
					content: 'Please note that our GitHub issue tracker serves for reporting bugs and new features only. Unfortunately, your request is neither of them, therefore please leave your question on <a href="https://stackoverflow.com/questions/tagged/ckeditor">Stack Overflow</a> where our team and the community assist other users in solving their issues. Also, since CKEditor is Open Source software, we believe it is crucial to share proposed solutions and make others benefit from them. If you have a commercial CKEditor license, please contact our support team. You also can ask your implementation questions at <a href="http://stackoverflow.com/questions/tagged/ckeditor">Stack Overflow</a>.'
				},
				{
					id: 5,
					name: 'thirdparty',
					title: 'Third party',
					content: 'The plugin you are referring to is a third-party one, and it is not maintained by <strong><a href="https://cksource.com">CKSource</a></strong>. Since we cannot fix issues with the code that does not belong to us, we are unable to help solve your issue. Please redirect your question to the plugin’s author who should be able to review the problem and suggest a solution. If, however, after contacting the plugin’s maintainer you find out the issue lies on the editor’s side, and you can provide a test case file showing the problem, we will be happy to have a look at it.'
				},
				{
					id: 6,
					name: 'unsupportedbrowser',
					title: 'Unsupported browser',
					content: 'Unfortunately, we are currently unable to fix issues occurring in browsers that we do not support. <a href="https://docs.ckeditor.com/ckeditor4/latest/guide/dev_browsers.html#officially-supported-browsers">See the supported browsers</a>. Please <a href="https://ckeditor.com/contact/">contact CKSource</a> to check what possibilities for fixing the issue the extended support can offer.'
				},
				{
					id: 7,
					name: 'translation',
					title: 'Translation',
					content: 'Thank you very much for your contribution! We are using <a href="https://www.transifex.com/ckeditor/ckeditor/">Transifex</a> for managing language strings. Please send your contribution there, so that we can pull it into the upcoming release.'
				},
				{
					id: 8,
					name: 'englishonly',
					title: 'English only',
					content: 'We are really sorry, but we do not speak your language. Can you please create a new issue in <strong>English</strong>?'
				},
				{
					id: 9,
					name: 'upstream',
					title: 'Upstream issue',
					content: 'This looks like a browser issue. We have reported it to the browser vendor and will update this bug report when we have information about a fix or suggested workaround.'
				},
				{
					id: 10,
					name: 'missingdetails',
					title: 'Missing details',
					content: 'We are unable to reproduce your issue. Can you please provide more information about your editor version, configuration, plugins used as well as the environment where this issue occurs?'
				}
			];

			CKEDITOR.replace( 'editor1', {
				plugins: 'autocomplete,textmatch,toolbar,wysiwygarea,basicstyles,link,undo',
				toolbar: [
					{ name: 'document', items: [ 'Undo', 'Redo' ] },
					{ name: 'basicstyles', items: [ 'Bold', 'Italic', 'Strike' ] },
					{ name: 'links', items: [ 'Link', 'Unlink' ] }
				],
				on: {
					instanceReady: function( evt ) {
						var itemTemplate = '<li data-id="{id}">' +
								'<strong>{title}</strong>' +
								'<div class="content">{content}</div>' +
							'</li>',
							outputTemplate = '<p>{content}</p>';

						var autocomplete = new CKEDITOR.plugins.autocomplete( evt.editor, {
							textTestCallback: textTestCallback,
							dataCallback: dataCallback,
							itemTemplate: itemTemplate,
							outputTemplate: outputTemplate
						} );

						// Override default getHtmlToInsert to enable rich content output.
						autocomplete.getHtmlToInsert = function( item ) {
							return this.outputTemplate.output( item );
						}
					}
				}
			} );

			function textTestCallback( range ) {
				if ( !range.collapsed ) {
					return null;
				}

				return CKEDITOR.plugins.textMatch.match( range, matchCallback );
			}

			function matchCallback( text, offset ) {
				var pattern = /\w{3,}$/,
					match = text.slice( 0, offset )
					.match( pattern );

				if ( !match ) {
					return null;
				}

				return {
					start: match.index,
					end: offset
				};
			}

			function dataCallback( matchInfo, callback ) {
				var data = TEMPLATES.filter( function( item ) {
					return item.name.indexOf( matchInfo.query.toLowerCase() ) == 0;
				} );

				callback( data );
			}
		</script>
	</body>
</html>
